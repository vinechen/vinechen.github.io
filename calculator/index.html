<!doctype html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>calculator</title>
    <style type="text/css">
        *{
            margin:0;
            padding:0;
            font-weight:lighter;
            font-family:Helvetica, Arial, sans-serif;
        }
        body{
            margin-left:450px;
        }
        .completeframe{
            top:9px;
            width:360px;
            height:640px;
            background-color:green;
            color:white;
            position:relative;
        }
        .statusbar{
            background-color:red;
            width:360px;
            height:8px;
        }
        .resultframe{
            width:360px;
            height:160px;
            background-color:black;
            bottom:465px;
            font-size:60px;
            position:absolute;
        }

        .computingtextresult{
            position:absolute;
            right:15px;
            bottom:5px;
        }
        .computingtextprocess{
            position:absolute;
            right:15px;
            bottom:80px;
        }
        table{
            border-spacing:1px;
            border:1px solid black;
            background-color:#323232;
            width:360px;
            height:465px;
            table-layout:fixed;
            font-size:36px;
            position:absolute;
            bottom:0px;
        }
        .rightside,.operators,.equal{
            background-color:#F98211;
        }
        .leftside,.symbol,.numbers{
            background-color:#C5C5C9;
            color:black;
        }
        .highLightCss{
            color:white;
        }
        .newClass{
            color: green;
        }
        .smallFont2{
            font-size:30px;
            position:absolute;
            right:15px;
            bottom:5px;
        }
    </style>
</head>
<body>

<div class="completeframe">

    <div class="statusbar"><a>statusbar</a></div>

    <div class="resultframe">
        <a id="resulttext" class="computingtextresult"> </a>
        <a id="process" class="computingtextprocess"> </a>
    </div>

    <!--keyboard begins here-->

    <table>
        <tr><th  class="symbol" id="clearEntry">C</th><th  class="symbol" id="addSubtract">+/-</th><th class="symbol" id="percentage">%</th><th  class="operators" name="operators" id="multiply">×</th></tr>
        <tr><th  class="numbers" name="numbers" id="7">7</th><th  class="numbers" name="numbers" id="8">8</th><th  class="numbers" name="numbers" id="9">9</th><th  class="operators" name="operators" id="divide">÷</th></tr>
        <tr><th  class="numbers" name="numbers" id="4">4</th><th  class="numbers" name="numbers" id="5">5</th><th  class="numbers" name="numbers" id="6">6</th><th  class="operators" name="operators" id="subtract">-</th></tr>
        <tr><th  class="numbers" name="numbers" id="1">1</th><th  class="numbers" name="numbers" id="2">2</th><th  class="numbers" name="numbers" id="3">3</th><th  class="operators" name="operators" id="add">+</th></tr>
        <tr><th colspan="2"  class="numbers" name="numbers" id="0">0</th><th  class="symbol" name="numbers" id="point">.</th><th  class="equal" id="equal">=</th></tr>
    </table>

</div>

<script type="text/javascript">
     window.onload=function(){
         fontsizeSmall();
    // 	highLight();
     }
    alert("Start operation?");




     //重置JS
     function reloadAbleJSFn(id,newJS)
     {
         var oldjs = null;
         var t = null;
         var oldjs = document.getElementById(id);
         if(oldjs) oldjs.parentNode.removeChild(oldjs);
         var scriptObj = document.createElement("script");
         scriptObj.src = newJS;
         scriptObj.type = "text/javascript";
         scriptObj.id   = id;
         document.getElementsByTagName("head")[0].appendChild(scriptObj);
     }


     var defaultValue = document.getElementById("resulttext").lastChild;
     var defaultProcess = document.getElementById("process").lastChild;
     function fontsizeSmall() {
         if (defaultValue.length > 9) {
             defaultValue.parentNode.setAttribute("class", "smallFont2");
         }                                                                 //数据溢出问题没想到好的解决办法，减小字体大小？
         if (defaultProcess.length > 9) {
             defaultProcess.parentNode.setAttribute("class", "smallFont1");
         }
     }


    function highLight(){
        var numberButton=document.getElementsByTagName("th");
        for(var i=0;i<numberButton.length;i++){
            var oldClass=numberButton[i].getAttribute("class");
            numberButton[i].onmouseover=function(){
                this.setAttribute("class","highLightCss");
            }
            numberButton[i].onmouseout=function(){
                this.setAttribute("class",oldClass);
            }
        }
    }

    var numberButton=document.getElementsByTagName("th");
    var numbers=document.getElementsByName("numbers");
    for(var i=0;i<numbers.length;i++){
        numbers[i].onclick=function(){
            var numberValue=this.lastChild.nodeValue;
            clickNumber(numberValue);
        }
    }





     var clearEntry = document.getElementById("clearEntry");
     function clearScreen() {
//                    defaultProcess.nodeValue=defaultValue.nodeValue;         //清零前是否有必要把第二行的数值丢到第一行
         defaultValue.nodeValue = " ";
         defaultValue.setAttribute("class", "computingtextresult");
         clearEntry.lastChild.nodeValue = "AC";
         clearEntry.onclick = function () {
//             defaultProcess.nodeValue = " ";
//             reloadAbleJSFn();
             clearEntry.lastChild.nodeValue = "C";
             defaultProcess.setAttribute("class", "computingtextprocess");
         }
     }

     clearEntry.onclick = function () {
         clearScreen();
     }




    function clickNumber(bV) {
//        var defaultValue = document.getElementById("resulttext").lastChild;
//        var defaultProcess = document.getElementById("process").lastChild;
        defaultValue.nodeValue += bV;
        // var firstNum=defaultValue.nodeValue;								//第一个数声明原本在这儿
        var operators = document.getElementsByName("operators")
        for (var i = 0; i < operators.length; i++) {
            operators[i].onclick = function () {

                var a = this.lastChild.nodeValue;
                defaultValue.nodeValue += a;
                fontsizeSmall();
                if (a === "+") {
                    document.getElementById("equal").onclick = function () {
                        var firstNum = defaultValue.nodeValue.split("+")[0];
                        var secondNum = defaultValue.nodeValue.split("+")[1];
                        var addResult = parseInt(firstNum) + parseInt(secondNum);
//                        var defaultProcess = document.getElementById("process").lastChild;
                        defaultProcess.nodeValue = defaultValue.nodeValue;
                        defaultValue.nodeValue = addResult;            //没想到更好的方法，只好先将数字赋值给字符串
//                        defaultValue.nodeValue=defaultValue.nodeValue.substr(0,10);
                        fontsizeSmall();
                    }
                }
                if (a === "-") {
                    document.getElementById("equal").onclick = function () {
                        var firstNum = defaultValue.nodeValue.split("+")[0];
                        var secondNum = defaultValue.nodeValue.split("-")[1];
                        var addResult = parseInt(firstNum) - parseInt(secondNum);
//                        var defaultProcess = document.getElementById("process").lastChild;
                        defaultProcess.nodeValue = defaultValue.nodeValue;
                        defaultValue.nodeValue = addResult;
//                        defaultValue.nodeValue=defaultValue.nodeValue.substr(0,10);
                        fontsizeSmall()
                    }
                }

                if (a === "×") {
                    document.getElementById("equal").onclick = function () {
                        var firstNum = defaultValue.nodeValue.split("+")[0];
                        var secondNum = defaultValue.nodeValue.split("×")[1];
                        var addResult = parseInt(firstNum) * parseInt(secondNum);
//                        var defaultProcess = document.getElementById("process").lastChild;
                        defaultProcess.nodeValue = defaultValue.nodeValue;
                        defaultValue.nodeValue = addResult;
//                        defaultValue.nodeValue=defaultValue.nodeValue.substr(0,10);
                        fontsizeSmall();
                    }
                }

                if (a === "÷") {
                    document.getElementById("equal").onclick = function () {
                        var firstNum = defaultValue.nodeValue.split("+")[0];
                        var secondNum = defaultValue.nodeValue.split("÷")[1];
                        var addResult = parseInt(firstNum) / parseInt(secondNum);
//                        var defaultProcess = document.getElementById("process").lastChild;
                        defaultProcess.nodeValue = defaultValue.nodeValue;
                        defaultValue.nodeValue = addResult;
//                        defaultValue.nodeValue=defaultValue.nodeValue.substr(0,10);
//                        fontsizeSmall();
                    }
                }
//                function fontsizeSmall() {
//                    if (defaultValue.length > 9) {
//                        defaultValue.parentNode.setAttribute("class", "smallFont2");
//                    }                                                                 //数据溢出问题没想到好的解决办法，减小字体大小？
//                    if (defaultProcess.length > 9) {
//                        defaultProcess.parentNode.setAttribute("class", "smallFont1");
//                    }


                    var clearEntry = document.getElementById("clearEntry");
                    clearEntry.onclick = function () {
//                    var defaultProcess=document.getElementById("process").lastChild;
//                    defaultProcess.nodeValue=defaultValue.nodeValue;         //清零前是否有必要把第二行的数值丢到第一行
                        defaultValue.nodeValue = " ";
                        defaultValue.parentNode.setAttribute("class", "computingtextresult")
                        clearEntry.lastChild.nodeValue = "AC";
                        clearEntry.onclick = function () {
                            var defaultProcess = document.getElementById("process").lastChild;
                            defaultProcess.nodeValue = " ";
                            clearEntry.lastChild.nodeValue = "C";
                        }
                    }
                }
            }

    }

//
//    function transmitNumber(whichNum){
//        // alert(whichNum.nodeValue);
//        // var numberButton=document.getElementsByTagName("th");
//        // for(var i=0;i<numberButton.length;i++){
//        // var buttonV=whichNum.lastChild;
//        // var defaultValue=document.getElementById("resulttext").lastChild;
//        // defaultValue.nodeValue=buttonV.nodeValue;
//        //}
//    //}
</script>


</body>
</html>